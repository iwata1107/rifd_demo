//
//  SettingDataSet.swift (minimalç‰ˆ)
//  RFID_ios
//
//  Created by ChatGPT on 2025/05/05.
//
//  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  ðŸ‘‰ æœ€å°æ§‹æˆ: ä»Šã¯ "ãƒ–ã‚¶ãƒ¼ ON/OFF" ã ã‘ä¿å­˜ã§ãã‚Œã°è‰¯ã„ã€ã¨ã„ã†è¦æ±‚ã«
//     çµžã£ãŸãƒ—ãƒ¬ãƒ¼ãƒ³ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã™ã€‚
//  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  å¿…è¦ã«ãªã£ãŸã‚‰ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æ®µéšŽçš„ã«è¿½åŠ ã—ã¦ã„ã‘ã‚‹ã‚ˆã†ã€æ‹¡å¼µã—ã‚„ã™ã„
//  ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ã«ã—ã¦ã„ã¾ã™ã€‚
//

import UIKit

// MARK: - å…±é€šãƒ—ãƒ­ãƒˆã‚³ãƒ« ------------------------------------------------------

/// è¨­å®šè¦ç´ ã®å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆä»Šå›žã¯ height ã®ã¿ï¼‰
protocol SettingData: Codable {
    var height: CGFloat { get }
}

// MARK: - ã‚¹ã‚¤ãƒƒãƒã‚¿ã‚¤ãƒ— -------------------------------------------------------

/// ON/OFF ã‚’æŒã¤ã‚·ãƒ³ãƒ—ãƒ«ãªè¨­å®šè¦ç´ 
final class SettingDataWithSwitch: SettingData {
    var headerText: String = ""
    var isEnabled: Bool = false
    var height: CGFloat { 64.0 }

    init(headerText: String = "", isEnabled: Bool = false) {
        self.headerText = headerText
        self.isEnabled  = isEnabled
    }
}

// MARK: - SettingDataSet (æœ€å°) ----------------------------------------------

/// *ä»Šã¯* ãƒ–ã‚¶ãƒ¼è¨­å®šã ã‘ã‚’æ‰±ã†ãƒŸãƒ‹ãƒžãƒ«ãªãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã€‚
/// ä»Šå¾Œé …ç›®ãŒå¢—ãˆãŸã‚‰ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ `values` é…åˆ—ã«è¿½åŠ ã—ã¦ã„ãã€‚
final class SettingDataSet: Codable {

    // â‘  ä»Šå›žå¿…è¦ãªã®ã¯ãƒ–ã‚¶ãƒ¼ ON/OFF ã ã‘
    var buzzer: SettingDataWithSwitch?

    /// ç©ºã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç”Ÿæˆ
    init() {
        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ ON
        self.buzzer = SettingDataWithSwitch(headerText: "Buzzer", isEnabled: true)
    }

    /// è¦ç´ ã‚’é…åˆ—åŒ–ï¼ˆé †ç•ªã¯å®šç¾©é †ï¼‰ã€‚ç™»éŒ²é …ç›®ãŒå¢—ãˆãŸã‚‰ã“ã“ã‚’æ‹¡å¼µ
    var values: [SettingData] {
        get { [buzzer].compactMap { $0 } }
        set(v) {
            guard v.count >= 1 else { return }
            buzzer = v[0] as? SettingDataWithSwitch
        }
    }
}
